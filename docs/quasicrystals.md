# Quasicrystal Module

This module implements various quasicrystalline structures as an extension to Lattice2D.jl. Quasicrystals are aperiodic structures that exhibit long-range order without translational symmetry.

## Implemented Quasicrystals

### 1. Fibonacci Lattice (1D Quasicrystal)
The simplest quasicrystal, consisting of two spacings (L: long, S: short) arranged in a Fibonacci sequence.

- **Spacing ratio**: φ (golden ratio) = (1+√5)/2 ≈ 1.618
- **Generation methods**:
  - **Projection**: From 2D square lattice onto a line with irrational slope
  - **Substitution**: Inflation rules L→LS, S→L

**Example**:
```julia
using Lattice2D

# Projection method
fib_proj = generate_fibonacci_projection(30)

# Substitution method (8 generations)
fib_subst = generate_fibonacci_substitution(8)

# Visualize
visualize_quasicrystal_positions(fib_proj)
```

### 2. Penrose P3 Tiling (2D, 5-fold Symmetry)
Famous aperiodic tiling with 5-fold rotational symmetry using two types of rhombi.

- **Tile types**: Fat rhombus (72°) and thin rhombus (36°)
- **Symmetry**: 5-fold rotational
- **Generation methods**:
  - **Projection**: From 5D hypercubic lattice
  - **Substitution**: Inflation rules for rhombi

**Example**:
```julia
# Projection method
penrose_proj = generate_penrose_projection(4.0)  # radius = 4.0

# Substitution method (3 generations)
penrose_subst = generate_penrose_substitution(3)

# Visualize vertices
visualize_quasicrystal_positions(penrose_proj)

# Visualize tiles
visualize_quasicrystal_tiles(penrose_subst)
```

### 3. Ammann-Beenker Tiling (2D, 8-fold Symmetry)
Octagonal quasicrystal tiling using squares and 45-degree rhombi.

- **Tile types**: Square and 45° rhombus
- **Symmetry**: 8-fold rotational
- **Scaling factor**: 1 + √2
- **Generation methods**:
  - **Projection**: From 4D hypercubic lattice
  - **Substitution**: Inflation rules for squares and rhombi

**Example**:
```julia
# Projection method
ab_proj = generate_ammann_beenker_projection(4.0)

# Substitution method (2 generations)
ab_subst = generate_ammann_beenker_substitution(2)

# Visualize
visualize_quasicrystal_tiles(ab_subst)
```

## Key Features

### Dual Generation Methods
Each quasicrystal supports two generation algorithms:

1. **Projection Method** (Cut-and-Project)
   - Projects from higher-dimensional periodic lattice
   - Based on theoretical understanding
   - Generates vertices within a specified radius
   - More computationally intensive for large patterns

2. **Substitution Method** (Inflation/Deflation)
   - Iterative replacement rules
   - Efficient for generating finite patterns
   - Number of iterations controls pattern size
   - Based on local rules

### Data Structures

**QuasicrystalData{D,T}**
- `positions`: Vector of vertex positions
- `tiles`: Vector of tile objects (for 2D quasicrystals)
- `generation_method`: Method used (ProjectionMethod or SubstitutionMethod)
- `parameters`: Dict of generation parameters

**Tile{D,T}**
- `vertices`: Corner positions of the tile
- `type`: Tile type identifier
- `center`: Center position

## Mathematical Background

### Golden Ratio
The golden ratio φ = (1+√5)/2 appears frequently in quasicrystals:
- Fibonacci lattice: spacing ratio L/S = φ
- Penrose tiling: edge length ratio = φ
- Related to 5-fold symmetry

### Projection Method
Quasicrystals can be generated by:
1. Creating a periodic lattice in higher dimensions
2. Defining a "physical" subspace and "perpendicular" space
3. Projecting lattice points that fall within an acceptance window

### Substitution Rules
Alternative approach using local replacement rules:
- Start with a small set of tiles
- Apply inflation rules iteratively
- Each generation increases pattern size by a constant factor

## Extensibility

The module is designed for easy extension with new quasicrystals:

```julia
# Define new quasicrystal type
struct MyQuasicrystal <: AbstractQuasicrystal{2} end

# Implement generation methods
function generate_my_qc_projection(radius::Real; method::ProjectionMethod=ProjectionMethod())
    # Implementation
    return QuasicrystalData{2,Float64}(positions, tiles, method, params)
end

function generate_my_qc_substitution(generations::Int; method::SubstitutionMethod=SubstitutionMethod())
    # Implementation
    return QuasicrystalData{2,Float64}(positions, tiles, method, params)
end
```

## References

1. **Penrose Tilings**:
   - Penrose, R. (1974). "The role of aesthetics in pure and applied mathematical research"
   - de Bruijn, N. G. (1981). "Algebraic theory of Penrose's non-periodic tilings"

2. **Ammann-Beenker Tiling**:
   - Ammann, R., Grünbaum, B., & Shephard, G. C. (1992). "Aperiodic tiles"

3. **Fibonacci Lattice**:
   - Levine, D., & Steinhardt, P. J. (1984). "Quasicrystals: A new class of ordered structures"

## Future Enhancements

- [ ] Decagonal Quasicrystals
- [ ] Dodecagonal Tilings
- [ ] 3D Quasicrystals (icosahedral symmetry)
- [ ] Neighbor relationships for quasicrystal vertices
- [ ] Voronoi decomposition
- [ ] Structure factor calculations
- [ ] Interactive visualization tools
